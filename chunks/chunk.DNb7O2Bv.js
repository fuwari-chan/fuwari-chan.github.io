import{h}from"hastscript";function GithubCardComponent(e,t){if(Array.isArray(t)&&0!==t.length)return h("div",{class:"hidden"},['Invalid directive. ("github" directive must be leaf type "::github{repo="owner/repo"}")']);if(!e.repo||!e.repo.includes("/"))return h("div",{class:"hidden"},'Invalid repository. ("repo" attributte must be in the format "owner/repo")');const a=e.repo,n=`GC${Math.random().toString(36).slice(-6)}`,r=h(`div#${n}-avatar`,{class:"gc-avatar"}),s=h(`span#${n}-language`,{class:"gc-language"},"Waiting..."),i=h("div",{class:"gc-titlebar"},[h("div",{class:"gc-titlebar-left"},[h("div",{class:"gc-owner"},[r,h("div",{class:"gc-user"},a.split("/")[0])]),h("div",{class:"gc-divider"},"/"),h("div",{class:"gc-repo"},a.split("/")[1])]),h("div",{class:"github-logo"})]),c=h(`div#${n}-description`,{class:"gc-description"},"Waiting for api.github.com..."),o=h(`div#${n}-stars`,{class:"gc-stars"},"00K"),d=h(`div#${n}-forks`,{class:"gc-forks"},"0K"),l=h(`div#${n}-license`,{class:"gc-license"},"0K"),g=h(`script#${n}-script`,{type:"text/javascript",defer:!0},`\n      fetch('https://api.github.com/repos/${a}', { referrerPolicy: "no-referrer" }).then(response => response.json()).then(data => {\n        document.getElementById('${n}-card').href = data.html_url;\n        document.getElementById('${n}-description').innerText = data.description.replace(/:[a-zA-Z0-9_]+:/g, '');\n        document.getElementById('${n}-language').innerText = data.language;\n        document.getElementById('${n}-forks').innerText = Intl.NumberFormat('en-us', { notation: "compact", maximumFractionDigits: 1 }).format(data.forks).replaceAll(" ", '');\n        document.getElementById('${n}-stars').innerText = Intl.NumberFormat('en-us', { notation: "compact", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(" ", '');\n        const avatarEl = document.getElementById('${n}-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        if (data.license?.spdx_id) {\n          document.getElementById('${n}-license').innerText = data.license?.spdx_id\n        } else {\n          document.getElementById('${n}-license').classList.add = "no-license"\n        };\n          document.getElementById('${n}-card').classList.remove("fetch-waiting");\n          console.log("[GITHUB-CARD] Loaded card for ${a} | ${n}.")\n      }).catch(err => {\n        const c = document.getElementById('${n}-card');\n        c.classList.add("fetch-error");\n         console.warn("[GITHUB-CARD] (Error) Loading card for ${a} | ${n}.")\n      })\n    `);return h(`a#${n}-card`,{class:"card-github fetch-waiting no-styling",href:`https://github.com/${a}`,target:"_blank",repo:a},[i,c,h("div",{class:"gc-infobar"},[o,d,l,s]),g])}export{GithubCardComponent};